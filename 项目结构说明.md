# 图片异步上传工具 - 项目结构说明# 图片异步上传工具 - 项目结构说明



**最后更新**: 2025-11-10  📅 **整理日期**: 2025年10月22日  

**当前版本**: v1.9📦 **当前版本**: v1.8.1



------



## 📁 整理后的目录结构## 📁 项目目录结构



``````

文件上传/E:\Python\文件上传\

├── 📄 主程序│

│   └── pyqt_app.py                    # PySide6/PyQt 主程序（v1.9）├── 📄 pyqt_app.py                      # 主程序源代码

│├── 📄 requirements.txt                 # Python依赖列表

├── 📦 源代码模块 (src/)├── 📄 README.md                        # 项目说明

│   ├── config_manager.py              # 配置管理模块├── 📄 test_uploader.py                 # 测试文件

│   ├── ftp_protocol.py                # FTP协议实现├── 📄 图片异步上传工具_v1.8.spec       # PyInstaller打包配置（当前版本）

│   └── ftp_ui_component.py            # FTP UI组件├── 📄 启动程序_pyqt.bat                # 开发环境快速启动脚本

│├── 📄 打包程序.bat                     # 一键打包脚本

├── 🚀 脚本目录 (scripts/)│

│   ├── 启动程序_pyqt.bat              # Windows启动脚本├── 📂 assets/                          # 资源文件

│   ├── 打包程序.bat                   # 打包脚本（生成.exe）│   ├── logo.png                       # 程序Logo

│   └── fix_indent.py                  # 代码格式化工具│   └── README.txt                     # 资源说明

││

├── ⚙️ 配置文件├── 📂 tools/                           # 开发工具

│   ├── config.json                    # 程序配置（用户数据）│   ├── make_icon.py                   # 图标制作工具

│   ├── requirements.txt               # Python依赖列表│   └── ui_mockup_v1_5.py             # UI原型设计

│   └── README.md                      # 项目说明文档│

│├── 📂 dist/                            # 打包输出目录

├── 📚 文档目录 (docs/)│   └── 图片异步上传工具_v1.8/         # 可执行程序包

│   ├── 软件使用说明书_v2.0.md│       ├── 图片异步上传工具_v1.8.exe  # 主程序

│   ├── 使用指南.md│       ├── config.json                # 配置文件（运行时生成）

│   └── 开发文档/│       ├── logs/                      # 日志目录（运行时生成）

│       ├── 版本说明.md                # 版本历史（v1.0-v1.9）│       └── _internal/                 # 依赖文件

│       ├── 线程与调用时序图.md        # 技术架构│

│       ├── UI设计说明_v1.4.md├── 📂 build/                           # 打包临时文件（可删除）

│       ├── 功能增强路线图_v2.0.md│

│       ├── 快速参考.txt├── 📂 docs/                            # 文档目录

│       ├── v2.0_开发任务书.md│   ├── 📄 软件使用说明书_v2.0.md      # ⭐ 最新使用说明书

│       ├── v2.0_快速参考.md│   ├── 📄 使用指南.md                  # 简明使用指南

│       ├── v2.0_FTP功能集成方案.md│   │

│       ├── v2.0_FTP功能设计任务书.md│   ├── 📂 历史版本/                    # 历史版本文档

│       ├── v2.0_UI风格统一说明.md│   │   ├── 使用指南_v1.8.md

│       ├── v2.0_阶段1完成总结.md│   │   ├── 打包说明_v1.8.md

│       └── v2.0_环境测试报告.md│   │   ├── 更新日志_v1.6.md

││   │   ├── 更新日志_v1.7.md

├── 🧪 测试目录 (tests/)│   │   ├── 更新日志_v1.8.md

│   ├── test_config_manager.py         # 配置管理测试│   │   ├── 更新说明_v1.8.1.md

│   ├── test_ftp_basic.py              # FTP基础测试│   │   └── 版本对比_v1.8_vs_v1.8.1.md

│   ├── test_uploader.py               # 上传功能测试│   │

│   ├── test_protocol_basic.py         # 协议基础测试│   └── 📂 开发文档/                    # 开发相关文档

│   └── ftp_test_data/                 # FTP测试数据│       ├── UI优化完成总结.md

│       └── upload/│       ├── UI设计说明_v1.4.md

│           └── test_upload.txt│       ├── v1.8更新完成总结.md

││       ├── 功能测试指南_v1.8.md

├── 🔧 工具目录 (tools/)│       ├── 功能迁移完成说明.md

│   ├── make_icon.py                   # 图标生成│       ├── 版本说明.md

│   ├── prepare_test_data.py           # 测试数据准备│       └── 快速参考.txt

│   ├── test_helper.py                 # 测试辅助│

│   ├── ui_mockup_v1_5.py              # UI原型└── 📂 backup/                          # 备份文件

│   └── 测试数据/    └── 📂 old_specs/                   # 旧版打包配置

│       ├── 测试数据说明.txt        ├── 图片异步上传工具.spec.bak

│       ├── 备份文件夹/        ├── 图片异步上传工具_PySide6_v1.0.spec

│       ├── 大文件测试集/        ├── 图片异步上传工具_v1.2.spec.bak

│       ├── 混合测试集/        ├── 图片异步上传工具_v1.3.spec.bak

│       ├── 目标文件夹/        └── 图片异步上传工具_v1.4.spec.bak

│       ├── 小文件测试集/```

│       ├── 源文件夹/

│       └── 重复文件测试集/---

│

├── 🎨 资源目录 (assets/)## 📝 目录说明

│   ├── README.txt

│   ├── save_logo.py### 核心文件

│   └── mockups/- **pyqt_app.py**: 程序主要源代码（1800+ 行）

│- **requirements.txt**: Python依赖包列表

├── 🗂️ 协议目录 (protocols/)- **图片异步上传工具_v1.8.spec**: PyInstaller打包配置文件

│   ├── __init__.py

│   ├── base.py                        # 协议基类### 开发工具

│   ├── errors.py                      # 错误定义- **启动程序_pyqt.bat**: 快速启动开发环境

│   ├── ftp_client.py                  # FTP客户端- **打包程序.bat**: 一键打包脚本（目录模式）

│   ├── manager.py                     # 协议管理器- **tools/**: 辅助开发工具

│   └── smb_adapter.py                 # SMB适配器

│### 资源文件

├── 📝 日志目录 (logs/)- **assets/**: 程序Logo等资源

│   ├── upload_2025-10-22.txt- **dist/**: 打包后的可执行程序（分发给用户）

│   ├── upload_2025-10-23.txt

│   ├── upload_2025-11-06.txt### 文档管理

│   └── upload_2025-11-07.txt- **docs/软件使用说明书_v2.0.md**: ⭐ 最新、最完整的使用说明书

│- **docs/历史版本/**: 历史版本的文档归档

├── 🔙 备份目录 (backup/)- **docs/开发文档/**: 开发过程的技术文档

│   └── old_specs/                     # 旧spec文件

│       ├── 图片异步上传工具_PySide6_v1.0.spec### 备份存档

│       ├── 图片异步上传工具_v1.2.spec.bak- **backup/old_specs/**: 旧版本的打包配置文件

│       ├── 图片异步上传工具_v1.3.spec.bak- **build/**: 打包临时文件（可以安全删除）

│       ├── 图片异步上传工具_v1.4.spec.bak

│       └── 图片异步上传工具.spec.bak---

│

├── 🏗️ 构建目录 (build/)## 🚀 快速操作

│   ├── 图片异步上传工具_v1.9/         # PyInstaller临时文件

│   └── 图片异步上传工具_v1.9.spec     # 打包配置### 开发环境运行

│```bash

├── 📦 分发目录 (dist/)# 方式1: 使用启动脚本

│   └── 图片异步上传工具_v1.9/.\启动程序_pyqt.bat

│       ├── 图片异步上传工具_v1.9.exe  # 主程序

│       ├── version.txt                # 版本文件# 方式2: 直接运行

│       ├── config.jsonpython pyqt_app.py

│       ├── assets/```

│       ├── logs/

│       └── _internal/                 # 依赖库### 打包程序

│```bash

└── 🔧 开发配置 (.vscode/)# 使用一键打包脚本

    └── settings.json.\打包程序.bat

```

# 或手动打包

---pyinstaller --clean --noconfirm "图片异步上传工具_v1.8.spec"

```

## 📋 整理说明（2025-11-10）

### 查看文档

### ✅ 已完成的整理- 用户文档: `docs/软件使用说明书_v2.0.md`

- 快速指南: `docs/使用指南.md`

1. **创建 `src/` 目录**- 历史版本: `docs/历史版本/`

   - 移动 `config_manager.py`

   - 移动 `ftp_protocol.py`---

   - 移动 `ftp_ui_component.py`

## 🧹 清理建议

2. **创建 `scripts/` 目录**

   - 移动 `启动程序_pyqt.bat`### 可以安全删除的文件/文件夹：

   - 移动 `打包程序.bat`- ✅ `build/` - 打包临时文件，下次打包会重新生成

   - 移动 `fix_indent.py`- ✅ `backup/` - 旧版本备份，确认不需要后可删除

- ✅ `docs/历史版本/` - 历史文档，确认不需要后可删除

3. **整理测试文件到 `tests/`**

   - 移动 `test_ftp_basic.py`### 不要删除的文件/文件夹：

   - 移动 `test_uploader.py`- ❌ `pyqt_app.py` - 主程序源代码

   - 移动 `test_ftp_share/` → `tests/ftp_test_data/`- ❌ `图片异步上传工具_v1.8.spec` - 当前打包配置

- ❌ `assets/` - 程序资源文件

4. **整理构建文件**- ❌ `dist/` - 打包输出（分发给用户）

   - 移动 `图片异步上传工具_v1.9.spec` 到 `build/`- ❌ `docs/软件使用说明书_v2.0.md` - 最新文档



5. **清理文档**---

   - 删除测试记录和临时文档（10个文件）

   - 保留核心开发文档## 📊 文件统计



### ⚠️ 需要手动处理- **源代码**: 1 个主文件 (pyqt_app.py, ~1800行)

- **文档**: 17 个 Markdown 文档

**`dist_backup_周一022511_085342/`** - 由于DLL文件被占用，无法自动删除- **打包配置**: 6 个 spec 文件（1个当前，5个历史）

- 建议：重启电脑后手动删除- **资源文件**: logo.png + 其他

- 或使用：`rmdir /s /q "dist_backup_周一022511_085342"`- **总大小**: ~650 MB (主要是 dist/ 目录)



------



## 🎯 目录功能说明## 🔄 版本历史



### 主程序- **v1.8.1** (2025-10-22): 日志文件写入、UI布局优化、复选框修复

- `pyqt_app.py` - 唯一的主程序入口，包含完整的GUI和业务逻辑- **v1.8** (2025-10-22): 权限系统、Logo显示、目录模式打包

- **v1.7**: 功能完善和优化

### 源代码模块 (src/)- **v1.6**: 基础功能实现

- 可复用的代码模块

- 被主程序导入使用---

- 便于代码组织和维护

**说明**: 此文档由系统自动生成，记录了项目整理后的结构。

### 脚本目录 (scripts/)
- 批处理脚本和工具脚本
- 用于启动、打包、格式化等辅助任务

### 测试目录 (tests/)
- 所有测试文件集中存放
- 包含单元测试和测试数据

### 文档目录 (docs/)
- 用户文档：使用说明书、使用指南
- 开发文档：版本说明、架构设计、v2.0规划

### 工具目录 (tools/)
- 开发辅助工具
- 测试数据准备工具
- UI原型工具

### 协议目录 (protocols/)
- 多协议上传的实现
- 当前支持：SMB/CIFS、FTP（开发中）

### 构建和分发 (build/ & dist/)
- `build/` - PyInstaller构建临时文件和配置
- `dist/` - 最终的可执行程序

---

## 🚀 快速开始

### 开发模式
```bash
# 方式1：直接运行Python
python pyqt_app.py

# 方式2：使用批处理脚本
scripts\启动程序_pyqt.bat
```

### 打包发布
```bash
# 使用打包脚本
scripts\打包程序.bat

# 输出位置
dist\图片异步上传工具_v1.9\
```

### 运行测试
```bash
# 运行所有测试
python -m pytest tests/

# 运行单个测试
python tests/test_config_manager.py
```

---

## 📝 文件数量统计

- **Python源文件**: 4个（主程序1个 + 模块3个）
- **测试文件**: 4个
- **批处理脚本**: 2个
- **文档文件**: 15个
- **配置文件**: 3个

---

## 🔄 版本历史

### v1.9 (2025-11-10)
- 整理项目结构
- 创建 src/ 和 scripts/ 目录
- 删除临时测试文档
- 更新项目结构说明

### v1.8-v1.0
- 详见 `docs/开发文档/版本说明.md`

---

**维护者**: 开发团队  
**许可证**: 待定
