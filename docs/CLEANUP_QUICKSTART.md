# 文件清理功能快速入门

## 功能定位
本工具用于**按目录和扩展名清理文件**，不是系统级磁盘清理工具。适合清理备份目录、临时文件、特定格式文件等。

## 使用步骤

### 1️⃣ 选择清理目标
**文件夹选择：**
- ✅ **备份文件夹**：自动读取主窗口配置
- ✅ **目标文件夹**：自动读取主窗口配置  
- ✅ **监控文件夹**：勾选后启用输入框和浏览按钮
- ✅ **自定义文件夹**：勾选后启用输入框和浏览按钮

💡 **提示：** 只有勾选的文件夹才会被扫描！

### 2️⃣ 选择文件格式
- 快捷按钮：全选、取消全选、仅图片
- 常见格式：图片、文档、日志、压缩包、临时文件等
- 自定义格式：输入框支持自定义扩展名（如 `.bak`）

### 3️⃣ 设置过滤条件（可选）
- 勾选"仅显示/删除 N 天前的文件"
- 调整天数（1-365 天）
- 帮助聚焦旧文件，避免误删新文件

### 4️⃣ 开始扫描
点击 **🔍 开始扫描** 按钮：
- 实时显示：当前目录 / 文件数 / 累计大小
- 随时取消：点击 **⏹ 取消扫描** 中止
- 扫描完成后显示文件列表表格

### 5️⃣ 查看和筛选结果
**表格功能：**
- 点击列标题排序（按大小、时间等）
- 搜索框过滤文件
- 取消勾选不想删除的文件
- 右键菜单：
  - 打开所在文件夹
  - 复制路径
  - 复制文件名

**统计信息：**
- 显示总文件数、总大小（MB/GB）
- 支持全选/取消全选

### 6️⃣ 确认删除
点击 **🗑️ 删除选中文件** 按钮：

**确认弹窗显示：**
```
【清理清单摘要】

Top 5 最大文件:
  1. video.mp4 (150.50 MB)
  2. backup.zip (89.30 MB)
  ...

⚠️ 即将移入回收站 100 个文件，共 450.00 MB

文件将移入回收站，可恢复

是否继续？
```

**安全提示：**
- ✅ 已安装 send2trash：默认勾选"移入回收站"，可恢复
- ❌ 未安装 send2trash：顶部红色警告，文件将永久删除

### 7️⃣ 完成清理
- 显示删除结果：成功数量、释放空间、失败数量
- 表格自动移除已删除的文件
- 可继续扫描或关闭对话框

---

## 高级功能

### 🔧 自动清理配置（折叠区域）
- 启用自动清理开关
- 设置磁盘阈值、保留天数、检查间隔
- 点击"保存配置"写入主窗口配置文件

---

## 安全建议

1. **首次使用：** 建议先取消勾选重要文件，小规模测试
2. **重要数据：** 确保已备份，或使用"移入回收站"模式
3. **定期清理：** 配合过滤条件，避免一次性删除过多文件
4. **检查结果：** 使用搜索和排序功能仔细检查文件列表

---

## 常见问题

**Q: 为什么"移入回收站"是灰色的？**  
A: 需要安装 `send2trash` 模块：`pip install send2trash`

**Q: 如何找回误删的文件？**  
A: 如果使用"移入回收站"模式，可在系统回收站恢复

**Q: 扫描很慢怎么办？**  
A: 
- 减少扫描目录数量
- 使用过滤条件缩小范围
- 随时点击"取消扫描"中止

**Q: 表格显示太多文件怎么办？**  
A: 使用搜索框过滤，或按大小排序查看最大的文件

**Q: "自动清理配置"是什么？**  
A: 独立的后台定时清理功能，与手动清理共用监控文件夹配置

---

## 快捷键和技巧

- **Ctrl+F**：聚焦到搜索框（部分系统）
- **点击列标题**：切换升序/降序排序
- **双击文件行**：无操作（需右键菜单）
- **全选后取消勾选特定文件**：适合"删除大部分，保留少数"场景

---

## 最佳实践

### 定期清理备份目录
1. 勾选"备份文件夹"
2. 选择常见图片格式
3. 启用"仅显示 30 天前的文件"
4. 扫描后按大小排序，查看最大的旧文件

### 清理临时文件
1. 勾选"自定义文件夹"，输入临时目录
2. 选择 `.tmp`, `.log`, `.bak` 等格式
3. 启用"仅显示 7 天前的文件"
4. 全选删除

### 清理特定项目文件
1. 使用"自定义文件夹"指定项目目录
2. 自定义格式输入 `.cache`, `.pyc` 等
3. 搜索框过滤特定子目录
4. 仔细检查后删除

---

更多信息请查看 `docs/CLEANUP_UPGRADE.md`
