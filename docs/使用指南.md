# 快速使用指南

## 🚀 启动方式

### Windows 系统（推荐）

1. 双击 `启动程序_pyqt.bat` 来运行 PySide6 (PyQt) 版本的程序。

2. 或者在命令行中运行（开发/调试用）:

```powershell
python pyqt_app.py
```

---

## ⚙️ 首次使用配置

### 步骤1: 设置文件夹路径

1. **源文件夹** - 点击"浏览"选择待上传图片的文件夹
   - 例如: `D:\生产线\待上传图片`

2. **目标文件夹** - 选择网络共享文件夹
   - 例如: `\\192.168.1.100\共享文件夹\图片`
   - 或者: `Z:\共享文件夹\图片` (已映射的网络驱动器)

3. **备份文件夹** - 选择上传成功后的备份位置
   - 例如: `D:\生产线\已上传备份`

### 步骤2: 配置上传参数

1. **监控模式**
   - 定时上传: 按设定的时间间隔检查并上传（推荐用于生产环境）
   - 实时监控: 持续监控文件夹变化，发现新文件立即上传

2. **间隔时间**
   - 设置检查和上传的时间间隔（10-3600秒）
   - 建议设置: 30-60秒（根据实际网络情况调整）

3. **磁盘告警阈值(%)**
   - 当目标或备份磁盘可用空间百分比低于此阈值时暂停上传并在日志提示
   - 建议设置: 10-20%（视目标磁盘容量与产线生成速率而定）
   - v1.2 改为百分比监控，更灵活适配不同容量磁盘

### 步骤3: 测试连接

点击"测试连接"按钮，确保目标文件夹可以正常访问

### 步骤4: 保存配置

点击"保存配置"按钮，下次启动自动加载配置

### 步骤5: 开始上传

点击"开始上传"按钮，软件开始监控并上传文件

---

## 📊 界面说明

### 运行状态区域
- **状态**: 显示当前运行状态（运行中/已停止）
- **已上传**: 显示本次启动后成功上传的文件数量
- **运行时间**: 显示服务运行的累计时间
- **进度条**: 显示当前批次上传百分比和已处理/总文件数（v1.2新增）
- **信息芯片**: 实时显示已上传、失败、跳过数量和上传速率

### 日志信息区域
实时显示操作日志，包括：
- 文件上传开始/成功/失败信息
- 错误提示和原因
- 系统操作记录
 - 磁盘空间不足报警与恢复提示

---

## 🔍 常见使用场景

### 场景1: 生产线定时上传
```
监控模式: 定时上传
间隔时间: 30秒
适用于: 稳定的图片生成频率，避免频繁检查占用资源
```

### 场景2: 实时监控上传
```
监控模式: 实时监控
间隔时间: 10秒
适用于: 需要快速上传的场景，对时效性要求高
```

### 场景3: 低峰时段批量上传
```
监控模式: 定时上传
间隔时间: 300秒（5分钟）
适用于: 网络繁忙时段，降低网络压力
```

---

## 🛠️ 网络共享文件夹配置

### Windows网络共享
1. 确保目标电脑已开启文件共享
2. 在源文件夹输入框输入UNC路径：`\\电脑名或IP\共享文件夹名`
3. 或者映射为网络驱动器后使用驱动器号

### 常见网络路径格式
```
\\192.168.1.100\Share\Images
\\SERVER01\Production\Photos
Z:\Network\Upload
```

---

## 📝 日志文件

日志文件位置: `logs/upload_YYYYMMDD.log`

日志包含信息：
- 时间戳
- 操作类型
- 文件名
- 成功/失败状态
- 错误原因（如果失败）

---

## ⚠️ 注意事项

1. **确保网络连接稳定**
   - 上传前先测试连接
   - 如果是无线网络，建议使用有线连接

2. **磁盘空间充足**
   - 备份文件夹需要足够空间
   - 定期清理备份文件夹

3. **避免重复启动**
   - 不要同时运行多个上传程序实例
   - 会导致文件冲突

4. **权限设置**
   - 确保对目标文件夹有写入权限
   - 对源文件夹和备份文件夹有读写权限

5. **文件名规范**
   - 避免使用特殊字符
   - 建议使用英文和数字

---

## 🐛 故障排除

### 问题1: "目标文件夹不存在"
**解决方法:**
- 检查网络连接
- 确认共享文件夹路径是否正确
- 尝试在Windows资源管理器中手动访问该路径

### 问题2: "权限不足"
**解决方法:**
- 确保对目标文件夹有写入权限
- 联系网络管理员开通权限

### 问题3: 上传速度慢
**解决方法:**
- 增加上传间隔时间
- 检查网络带宽使用情况
- 考虑在网络空闲时段上传

### 问题4: 软件无响应
**解决方法:**
- 点击"停止上传"按钮
- 关闭软件重新启动
- 检查日志文件查看错误信息

### 问题5: 文件上传失败
**解决方法:**
- 查看日志中的具体错误信息
- 检查目标文件夹磁盘空间
- 确认文件未被占用
- 检查文件名是否包含非法字符

### 问题6: 磁盘空间不足导致暂停
**解决方法:**
- 释放目标或备份磁盘空间，使可用空间高于配置阈值
- 程序会自动恢复继续上传

---

## 💡 使用技巧

1. **配置保存**: 首次配置完成后点击"保存配置"，避免每次重新设置

2. **日志查看**: 定期查看日志文件，了解上传情况

3. **备份管理**: 定期清理备份文件夹，释放磁盘空间

4. **监控调整**: 根据实际情况调整监控间隔，平衡效率和性能

5. **多实例运行**: 如需同时上传到多个位置，可以在不同目录运行多个软件实例

---

## 📞 技术支持

遇到问题时，请提供以下信息：
1. 软件版本号
2. 操作系统版本
3. 错误截图
4. 日志文件内容
5. 具体错误描述

---

祝使用愉快！🎉